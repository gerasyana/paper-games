(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,n){"use strict";var a=n(1),r=n.n(a);n(57);t.a=function(e){return r.a.createElement("div",{className:"spinner"},"Loading...")}},48:function(e,t,n){e.exports=n(84)},5:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return c}),n.d(t,"g",function(){return u}),n.d(t,"h",function(){return o}),n.d(t,"f",function(){return i}),n.d(t,"d",function(){return l}),n.d(t,"i",function(){return s}),n.d(t,"e",function(){return d}),n.d(t,"k",function(){return p}),n.d(t,"l",function(){return m}),n.d(t,"j",function(){return b});var a="CHECK_AUTHENTICATION",r="AUTH_SET_TIMEOUT",c="INIT_LOGIN",u="LOGIN_START",o="LOGIN_SUCCESS",i="LOGIN_FAILED",l="INIT_LOGOUT",s="LOGOUT_SUCCESS",d="INIT_SIGNUP",p="SIGNUP_START",m="SIGNUP_SUCCESS",b="SIGNUP_FAILED"},57:function(e,t,n){},7:function(e,t,n){"use strict";var a=n(5);function r(){return{type:a.b}}function c(e){return{type:a.c,credentials:e}}function u(){return{type:a.g}}function o(e){return{type:a.h,user:e}}function i(e){return{type:a.f,error:e}}function l(){return{type:a.d}}function s(){return{type:a.i}}function d(e){return{type:a.e,user:e}}function p(){return{type:a.k}}function m(e){return{type:a.l,user:e}}function b(e){return{type:a.j,error:e}}var f=function(e){return{type:a.a,expirationTime:e}};n.d(t,"a",function(){return r}),n.d(t,"h",function(){return f}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"i",function(){return d}),n.d(t,"k",function(){return p}),n.d(t,"l",function(){return m}),n.d(t,"j",function(){return b}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return s})},84:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(43),u=n.n(c),o=n(26),i=n(16),l=n(20),s=n(47),d=n(17),p=n(18),m=n(22),b=n(19),f=n(21),v=n(11),x=n(34),O=function(e){return e.children},h=function(e){var t,n=null;"link"===e.type&&(n=r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:e.link,className:"nav-link",exact:e.exact},e.label))),"text"===e.type&&(n=r.a.createElement("li",{className:"nav-item"},r.a.createElement("span",{className:"nav-link"},e.label))),"dropdown"===e.type&&(e.dropdownItems&&(t=e.dropdownItems.map(function(e){return r.a.createElement(o.b,{key:e.key,to:e.link,className:"dropdown-item",exact:e.exact},e.label)})),n=r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{className:"nav-link dropdown-toggle",href:"/","data-toggle":"dropdown",id:"download"},e.label,r.a.createElement("span",{className:"caret"})),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"download"},t)));return n},E=function(e){var t=[{key:"tic-tack-toe",label:"Tic Tack Toe",link:"/games/tic-tack-toe"}],n=r.a.createElement(O,null,r.a.createElement(h,{type:"link",link:"/login",label:"Login"})),a=r.a.createElement(O,null,r.a.createElement(h,{type:"link",dropdownItems:t,label:"Rooms"}),r.a.createElement(h,{type:"dropdown",dropdownItems:t,label:"Games"}));return e.isAuthenticated&&(n=r.a.createElement(O,null,r.a.createElement(h,{type:"text",label:"0 scores"}),";",r.a.createElement(h,{type:"text",label:e.user.username}),";",r.a.createElement(h,{type:"link",link:"/logout",label:"Logout"}))),r.a.createElement(O,null,r.a.createElement("ul",{className:"nav navbar-nav navbar-nav"},a),r.a.createElement("ul",{className:"nav navbar-nav navbar-nav ml-auto"},n))},g=function(e){return r.a.createElement("div",{className:"navbar navbar-expand-lg fixed-top navbar-dark bg-primary"},r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarResponsive"},r.a.createElement(E,e))))},k=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(O,null,r.a.createElement(g,this.props),this.props.children)}}]),t}(a.Component),j=Object(l.b)(function(e){return{user:e.auth.user,isAuthenticated:e.auth.isAuthenticated}})(k),y=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},"PaperGames")}}]),t}(r.a.Component),w=n(7),N=r.a.lazy(function(){return n.e(3).then(n.bind(null,88))}),T=r.a.lazy(function(){return n.e(5).then(n.bind(null,89))}),I=r.a.lazy(function(){return n.e(4).then(n.bind(null,90))}),S=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.checkAuthentication()}},{key:"render",value:function(){var e=this;return r.a.createElement(j,null,r.a.createElement(a.Suspense,{fallback:r.a.createElement(x.a,null)},r.a.createElement(v.d,null,r.a.createElement(v.b,{path:"/login",exact:!0,render:function(){return r.a.createElement(N,e.props)}}),r.a.createElement(v.b,{path:"/logout",render:function(){return r.a.createElement(T,e.props)}}),r.a.createElement(v.b,{path:"/signup",exact:!0,render:function(){return r.a.createElement(I,e.props)}}),r.a.createElement(v.b,{path:["/","/games"],component:y}))))}}]),t}(a.Component),A=Object(l.b)(null,function(e){return{checkAuthentication:function(){return e(w.a())}}})(S),D=n(24),C=n(5),U={user:null,isAuthenticated:!1,loading:!1,token:null,error:null},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.g:case C.k:return Object(D.a)({},e,{loading:!0,isAuthenticated:!1,error:null});case C.h:case C.l:return Object(D.a)({},e,{loading:!1,isAuthenticated:!0,user:t.user});case C.f:case C.j:return Object(D.a)({},e,{loading:!1,isAuthenticated:!1,error:t.error});case C.i:return Object(D.a)({},e,{isAuthenticated:!1,user:null});default:return e}},_=n(10),G=n.n(_),P=n(6),R=n(46),H=n.n(R),z="token",M="expirationDate",B=Object({NODE_ENV:"production",PUBLIC_URL:""}).PORT||"http://localhost:5000",F=H.a.create({baseURL:"".concat(B,"/api"),headers:{common:{"Access-Control-Allow-Origin":B,"Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"},post:{"Content-Type":"application/json"}}});F.interceptors.request.use(function(e){var t=localStorage.getItem(z);return t&&(e.headers["x-auth"]=t),e});var J=F;var q=G.a.mark(X),K=G.a.mark(Y),V=G.a.mark(Z),Q=G.a.mark($),W=G.a.mark(ee);function X(e){return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.removeItem(z);case 2:return e.next=4,localStorage.removeItem(M);case 4:return e.next=6,Object(P.c)(w.g());case 6:case"end":return e.stop()}},q)}function Y(e){var t,n,a;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem(z);case 2:if(e.sent){e.next=8;break}return e.next=6,Object(P.c)(w.f());case 6:e.next=27;break;case 8:return e.next=10,new Date(localStorage.getItem(M));case 10:if(!((t=e.sent)<=new Date)){e.next=16;break}return e.next=14,Object(P.c)(w.f());case 14:e.next=27;break;case 16:return e.next=18,J.get("/user");case 18:if(!(n=e.sent).data){e.next=27;break}return e.next=22,t.getTime()-(new Date).getTime();case 22:return a=e.sent,e.next=25,Object(P.c)(w.e(n.data));case 25:return e.next=27,Object(P.c)(w.h(a));case 27:case"end":return e.stop()}},K)}function Z(e){var t,n,a;return G.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(P.c)(w.d());case 2:return r.next=4,c=e.credentials,J.post("/user/login",c);case 4:if(!(t=r.sent).data.error){r.next=10;break}return r.next=8,Object(P.c)(w.c(t.data.error));case 8:r.next=20;break;case 10:return n=t.data.tokenDetails.expirationDate,r.next=13,ne(n);case 13:return a=r.sent,r.next=16,Object(P.c)(w.e(t.data.user));case 16:return r.next=18,te(t.data.tokenDetails);case 18:return r.next=20,Object(P.c)(w.h(a));case 20:case"end":return r.stop()}var c},V)}function $(e){var t,n,a;return G.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(P.c)(w.k());case 2:return r.next=4,c=e.user,J.post("/user/signup",c);case 4:if(!(t=r.sent).data.error){r.next=10;break}return r.next=8,Object(P.c)(w.j(t.data.error));case 8:r.next=20;break;case 10:return n=t.data.tokenDetails.expirationDate,r.next=13,ne(n);case 13:return a=r.sent,r.next=16,Object(P.c)(w.l(t.data.user));case 16:return r.next=18,te(t.data.tokenDetails);case 18:return r.next=20,Object(P.c)(w.h(a));case 20:case"end":return r.stop()}var c},Q)}function ee(e){return G.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(P.b)(e.expirationTime);case 2:return t.next=4,Object(P.c)(w.f());case 4:case"end":return t.stop()}},W)}function te(e){localStorage.setItem(z,e.token),localStorage.setItem(M,e.expirationDate)}function ne(e){return new Date(e).getTime()-(new Date).getTime()}var ae=G.a.mark(re);function re(){return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.a)([Object(P.d)(C.b,Y),Object(P.d)(C.a,ee),Object(P.d)(C.c,Z),Object(P.d)(C.e,$),Object(P.d)(C.d,X)]);case 2:case"end":return e.stop()}},ae)}var ce=i.d,ue=Object(s.a)(),oe=Object(i.e)(Object(i.c)({auth:L}),ce(Object(i.a)(ue)));ue.run(re);var ie=r.a.createElement(l.a,{store:oe},r.a.createElement(o.a,null,r.a.createElement(A,null)));u.a.render(ie,document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.0cadd0df.chunk.js.map