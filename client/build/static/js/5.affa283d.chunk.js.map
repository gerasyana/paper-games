{"version":3,"sources":["containers/Auth/ResetPassword/ResetPassword.js"],"names":["ResetPassword","props","_this","Object","_home_travis_build_gerasyana_paper_games_client_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","this","_home_travis_build_gerasyana_paper_games_client_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","_home_travis_build_gerasyana_paper_games_client_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","call","setControlValue","event","key","target","id","value","validationResults","validateInput","state","validation","control","_home_travis_build_gerasyana_paper_games_client_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","controls","_home_travis_build_gerasyana_paper_games_client_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","setState","buttonEnabled","isButtonEnabled","validControls","keys","filter","hasOwnProperty","isValid","length","resetPassword","data","username","password","type","label","placeholder","required","minLength","maxLength","nextProps","nextState","isAuthenticated","loading","error","_this2","formElements","map","input","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","_UI_Input_Input__WEBPACK_IMPORTED_MODULE_10__","assign","onChange","errorMessage","className","form","_UI_Button_Button__WEBPACK_IMPORTED_MODULE_11__","onClick","disabled","react_router__WEBPACK_IMPORTED_MODULE_8__","to","_UI_Spinner_Spinner__WEBPACK_IMPORTED_MODULE_12__","Component","connect","auth","dispatch","user","actions"],"mappings":"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","file":"static/js/5.affa283d.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router';\nimport { connect } from 'react-redux';\n\nimport Input from '../../../UI/Input/Input';\nimport Button from '../../../UI/Button/Button';\nimport Spinner from '../../../UI/Spinner/Spinner';\nimport * as actions from '../../../storage/actions/actions'\nimport { validateInput } from '../../../helpers/validation';\n\nclass ResetPassword extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            controls: {\n                username: {\n                    id: 'username',\n                    type: 'text',\n                    label: 'Username',\n                    value: '',\n                    placeholder: 'Enter username'\n                },\n                password: {\n                    id: 'password',\n                    type: 'password',\n                    label: 'New password',\n                    value: '',\n                    placeholder: 'Enter new password'\n                }\n            },\n            validation: {\n                username: {\n                    required: true,\n                    minLength: 5,\n                    maxLength: 15\n                },\n                password: {\n                    required: true,\n                    minLength: 5,\n                    maxLength: 20\n                }\n            },\n            buttonEnabled: false\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        return this.props.isAuthenticated !== nextProps.isAuthenticated ||\n            this.props.loading !== nextProps.loading ||\n            this.props.error !== nextProps.error ||\n            this.state.controls !== nextState.controls;\n    }\n\n    setControlValue = (event) => {\n        const key = event.target.id;\n        const value = event.target.value;\n        const validationResults = validateInput(value, this.state.validation[key]);\n        const control = {\n            ...this.state.controls[key],\n            ...validationResults,\n            value\n        };\n        const controls = {\n            ...this.state.controls,\n            [key]: control\n        }\n        this.setState({\n            controls,\n            buttonEnabled: this.isButtonEnabled(controls)\n        });\n    }\n\n    isButtonEnabled = (controls) => {\n        const validControls = Object.keys(controls).filter(key => {\n            const control = controls[key];\n            return Object.hasOwnProperty.call(control, 'isValid') && control.isValid\n        });\n        return Object.keys(controls).length === validControls.length;\n    }\n\n    resetPassword = () => {\n        const data = {\n            username: this.state.controls.username.value,\n            password: this.state.controls.password.value\n        }\n        this.props.resetPassword(data);\n    }\n\n    render() {\n        const formElements = Object.keys(this.state.controls).map(key => {\n            const input = this.state.controls[key];\n            return <Input key={key}{...input} onChange={this.setControlValue} />;\n        });\n\n        let errorMessage = null;\n        if (this.props.error) {\n            errorMessage = (\n                <div className=\"alert alert-dismissible alert-secondary\">\n                    <strong>{this.props.error}</strong>\n                </div>\n            );\n        }\n\n        let form = (\n            <div className=\"body-container container\">\n                <div className=\"row justify-content-center\">\n                    <div className=\"col-sm-4 col-margin-fixed\">\n                        {errorMessage}\n                        {formElements}\n                        <div>\n                            <Button\n                                type=\"submit\"\n                                className='btn btn-primary'\n                                onClick={this.resetPassword}\n                                disabled={!this.state.buttonEnabled}>\n                                Reset password\n                            </Button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n\n        if (this.props.isAuthenticated) {\n            form = <Redirect to='/' />\n        }\n\n        if (this.props.loading) {\n            form = <Spinner />\n        }\n        return form;\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isAuthenticated: state.auth.isAuthenticated,\n        loading: state.auth.loading,\n        error: state.auth.error\n    }\n}\n\nconst mapDispatchToState = (dispatch) => {\n    return {\n        resetPassword: (user) => dispatch(actions.resetPassword(user))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToState)(ResetPassword);"],"sourceRoot":""}