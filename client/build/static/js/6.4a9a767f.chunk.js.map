{"version":3,"sources":["containers/Auth/SignUp/SignUp.js"],"names":["SignUp","props","_this","Object","_home_travis_build_gerasyana_paper_games_client_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","this","_home_travis_build_gerasyana_paper_games_client_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","_home_travis_build_gerasyana_paper_games_client_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","call","setControlValue","event","key","target","id","value","validationResults","validateInput","state","validation","control","_home_travis_build_gerasyana_paper_games_client_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","controls","_home_travis_build_gerasyana_paper_games_client_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","setState","buttonEnabled","isButtonEnabled","validControls","keys","filter","hasOwnProperty","isValid","length","signUp","user","username","email","password","type","label","placeholder","required","minLength","maxLength","isEmail","nextProps","nextState","isAuthenticated","loading","error","_this2","formElements","map","input","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","_UI_Input_Input__WEBPACK_IMPORTED_MODULE_10__","assign","onChange","errorMessage","className","form","_UI_Button_Button__WEBPACK_IMPORTED_MODULE_11__","onClick","disabled","react_router__WEBPACK_IMPORTED_MODULE_8__","to","_UI_Spinner_Spinner__WEBPACK_IMPORTED_MODULE_12__","Component","connect","auth","dispatch","actions"],"mappings":"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","file":"static/js/6.4a9a767f.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router';\nimport { connect } from 'react-redux';\n\nimport Input from '../../../UI/Input/Input';\nimport Button from '../../../UI/Button/Button';\nimport Spinner from '../../../UI/Spinner/Spinner';\nimport * as actions from '../../../storage/actions/actions'\nimport { validateInput } from '../../../helpers/validation';\n\nclass SignUp extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            controls: {\n                email: {\n                    id: 'email',\n                    type: 'email',\n                    label: 'Email',\n                    value: '',\n                    placeholder: 'Enter email'\n                },\n                username: {\n                    id: 'username',\n                    type: 'text',\n                    label: 'Username',\n                    value: '',\n                    placeholder: 'Enter username'\n                },\n                password: {\n                    id: 'password',\n                    type: 'password',\n                    label: 'Password',\n                    value: '',\n                    placeholder: 'Enter password'\n                }\n            },\n            validation: {\n                username: {\n                    required: true,\n                    minLength: 5,\n                    maxLength: 15\n                },\n                password: {\n                    required: true,\n                    minLength: 5,\n                    maxLength: 20\n                },\n                email: {\n                    required: true,\n                    isEmail: true\n                }\n            },\n            buttonEnabled: false\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        return this.props.isAuthenticated !== nextProps.isAuthenticated ||\n            this.props.loading !== nextProps.loading ||\n            this.props.error !== nextProps.error ||\n            this.state.controls !== nextState.controls;\n    }\n\n    setControlValue = (event) => {\n        const key = event.target.id;\n        const value = event.target.value;\n        const validationResults = validateInput(value, this.state.validation[key]);\n        const control = {\n            ...this.state.controls[key],\n            ...validationResults,\n            value\n        };\n        const controls = {\n            ...this.state.controls,\n            [key]: control\n        }\n        this.setState({\n            controls,\n            buttonEnabled: this.isButtonEnabled(controls)\n        });\n    }\n\n    isButtonEnabled = (controls) => {\n        const validControls = Object.keys(controls).filter(key => {\n            const control = controls[key];\n            return Object.hasOwnProperty.call(control, 'isValid') && control.isValid\n        });\n        return Object.keys(controls).length === validControls.length;\n    }\n\n    signUp = () => {\n        const user = {\n            username: this.state.controls.username.value,\n            email: this.state.controls.email.value,\n            password: this.state.controls.password.value,\n        }\n        this.props.signUp(user);\n    }\n\n    render() {\n        const formElements = Object.keys(this.state.controls).map(key => {\n            const input = this.state.controls[key];\n            return <Input key={key}{...input} onChange={this.setControlValue} />;\n        });\n\n        let errorMessage = null;\n        if (this.props.error) {\n            errorMessage = (\n                <div className=\"alert alert-dismissible alert-secondary\">\n                    <strong>{this.props.error}</strong>\n                </div>\n            );\n        }\n\n        let form = (\n            <div className=\"body-container container\">\n                <div className=\"row justify-content-center\">\n                    <div className=\"col-sm-4 col-margin-fixed\">\n                        {errorMessage}\n                        {formElements}\n                        <div>\n                            <Button\n                                type=\"submit\"\n                                className='btn btn-primary'\n                                onClick={this.signUp}\n                                disabled={!this.state.buttonEnabled}>\n                                Sign Up\n                            </Button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n\n        if (this.props.isAuthenticated) {\n            form = <Redirect to='/' />\n        }\n\n        if (this.props.loading) {\n            form = <Spinner />\n        }\n        return form;\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isAuthenticated: state.auth.isAuthenticated,\n        loading: state.auth.loading,\n        error: state.auth.error\n    }\n}\n\nconst mapDispatchToState = (dispatch) => {\n    return {\n        signUp: (user) => dispatch(actions.signUp(user))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToState)(SignUp);"],"sourceRoot":""}